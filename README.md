---
title: N8n Free
emoji: âš¡
colorFrom: blue
colorTo: gray
sdk: docker
pinned: false
license: mit
short_description: n8n free hosted with supebase
---

# N8n Free

This repository provides a template for deploying a free, self-updating instance of n8n on [Hugging Face Spaces](https://huggingface.co/spaces), using [Supabase](https://supabase.com/) as the database backend.

The setup includes automated GitHub Actions to:

- Keep the Hugging Face Space and Supabase project alive.
- Check for new n8n versions daily and automatically update the deployment.

## Deployment Guide

Follow these steps to deploy your own free n8n instance.

### 1. Fork the Repository

Start by forking this repository to your own GitHub account.

### 2. Create a Supabase Project

1. Go to [Supabase](https://supabase.com/) and create a new project.
2. Once the project is created, navigate to the **SQL Editor**.
3. Run the following SQL query to create a `keep-alive` table. This is used by the keep-alive workflow to ensure your Supabase instance doesn't get paused due to inactivity.

    ```sql
    CREATE TABLE "keep-alive" (
      id BIGINT generated BY DEFAULT AS IDENTITY,
      name text NULL,
      created_at timestamptz DEFAULT now(),
      CONSTRAINT "keep-alive_pkey" PRIMARY KEY (id)
    );
    INSERT INTO "keep-alive"(name) VALUES ('ping');
    ```

4. Navigate to **Project Settings > API** and find your **Project URL** and **annon public legacy API key**. You will need these in the next step.

5. To ensure a secure connection to your database, you should configure SSL. In your Supabase project, go to **Project Settings > Database**. Scroll down to **SSL Configuration** and enable it.

### 3. Create a Hugging Face Space

1. Go to [Hugging Face Spaces](https://huggingface.co/new-space) and create a new Space.
2. Select **Docker** as the Space SDK and choose a free hardware option.
3. Choose the forked repository from your GitHub account to deploy from.
4. After the Space is created, go to the **Settings** tab and add the following secrets and variables:
    a. Secrets
        - `DB_POSTGRESDB_PASSWORD`: The supabase database password.
        - `DB_POSTGRESDB_USER`: The supabase database user.
        - `N8N_ENCRYPTION_KEY`: An n8n encryption key.
    b. Variables
        - `GENERIC_TIMEZONE`: The n8n generic timezone.
        - `TZ`: The n8n timezone.
        - `DB_TYPE`: Set to `postgres`.
        - `DB_POSTGRESDB_SCHEMA`: Set to `public`.
        - `DB_POSTGRESDB_HOST`: The supabase database host.
        - `DB_POSTGRESDB_DATABASE`: Set to `postgres`.
        - `DB_POSTGRESDB_PORT`: The supabase database port.
        - `N8N_PORT`: Set to `7860`.
        - `N8N_PROTOCOL`: Set to `https`.
        - `N8N_EDITOR_BASE_URL`: Set to `https://<username>-<space>.hf.space`.
        - `WEBHOOK_URL`: Set to `https://<username>-<space>.hf.space`.
        - `N8N_HOST`: Set to `<username>-<space>.hf.space`.
        - `N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS`: Set to `true`.
        - `N8N_DATABASE_SSL_REJECT_UNAUTHORIZED`: Set to `true`.
        - `DB_POSTGRESDB_SSL_CA`: Set to the content of the Supabase SSL certificate.
        - `N8N_PROXY_HOPS`: Set to `1`.

### 4. Configure GitHub Repository Secrets

To allow the GitHub Actions to update your Hugging Face Space, you need to add your Hugging Face API token to your forked repository's secrets.

1. Create a Hugging Face token with write permissions at [huggingface.co/settings/tokens](https://huggingface.co/settings/tokens).
2. In your forked GitHub repository, go to **Settings > Secrets and variables > Actions**.
3. Create a new secret named `HF_TOKEN` and paste your Hugging Face token.

## How It Works

This project uses GitHub Actions to automate maintenance and updates.

### Automatic n8n Updates

The `.github/workflows/update-n8n.yml` workflow runs daily at 3:00 AM (UTC). It performs the following steps:

1. **Checks for new n8n versions:** It fetches the latest version tag from the official [n8n GitHub repository](https://github.com/n8n-io/n8n).
2. **Compares versions:** It compares the latest version with the version currently specified in the `Dockerfile`.
3. **Updates and Pushes:** If a new version is found, the workflow:
    - Updates the `Dockerfile` with the new version tag.
    - Commits the change to your repository.
    - Pushes the updated `Dockerfile` to your Hugging Face Space, triggering a rebuild and updating your n8n instance.

You can also trigger this workflow manually from the **Actions** tab in your GitHub repository.

### Keep-Alive Services

To prevent the free tiers of Hugging Face Spaces and Supabase from being paused due to inactivity, two separate workflows run daily at 0:00 AM (UTC):

- **Hugging Face Keep-Alive (`huggingface-keep-alive.yml`):** This workflow sends a simple `curl` request to your Hugging Face Space URL to simulate traffic.
- **Supabase Keep-Alive (`supabase-keep-alive.yml`):** This workflow sends a `curl` request to the `keep-alive` table in your Supabase database, ensuring the database remains active.

### Configuring Keep-Alive Actions

To make the keep-alive workflows functional, you need to:

1. **Update the Hugging Face Keep-Alive URL:**
    - Create a new variable named `HF_SPACE_URL` and paste your actual Hugging Face Space URL.

2. **Add Supabase Secrets to GitHub:**
    - In your forked GitHub repository, go to **Settings > Secrets and variables > Actions**.
    - Create a new secret named `SUPABASE_URL` and paste your Supabase Project URL.
    - Create another new secret named `SUPABASE_KEY` and paste your Supabase `anon public` API key.
