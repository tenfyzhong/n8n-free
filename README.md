---
title: N8n Free
emoji: âš¡
colorFrom: blue
colorTo: gray
sdk: docker
pinned: false
license: mit
short_description: n8n on Hugging Face Spaces with Supabase
---

# N8n Free

This repository deploys n8n on Hugging Face Spaces with a Supabase Postgres backend.
It ships with GitHub Actions to keep the Space alive, run health checks, and update n8n.

## Quick start

- Fork this repo on GitHub.
- Create a Supabase project and run the keep-alive SQL.
- Create a Hugging Face Space (Docker) linked to your fork.
- Add Hugging Face Space secrets and variables (tables below).
- Add GitHub Actions secrets and variables (tables below).
- Update the Space remote in workflows and the local healthcheck script.
- Trigger the push or update workflow once.

## Deployment guide (Hugging Face Spaces only)

### 1. Fork the repository

Fork this repo to your GitHub account.

### 2. Create a Supabase project

1. Create a new project at Supabase.
2. In **SQL Editor**, run:

```sql
CREATE TABLE "keep-alive" (
  id BIGINT generated BY DEFAULT AS IDENTITY,
  name text NULL,
  created_at timestamptz DEFAULT now(),
  CONSTRAINT "keep-alive_pkey" PRIMARY KEY (id)
);
INSERT INTO "keep-alive"(name) VALUES ('ping');
```

3. Enable SSL in **Project Settings > Database > SSL Configuration**.
4. Collect database connection details from **Project Settings > Database**:
   host, port, database user, password, and database name.

### 3. Create a Hugging Face Space (Docker)

1. Create a new Space and choose **Docker** as the SDK.
2. Link it to your forked GitHub repository.
3. Pick a free hardware option.

### 4. Configure Hugging Face Space secrets

Add these as **Secrets** in the Space settings:

| Secret | Value |
| --- | --- |
| `DB_POSTGRESDB_HOST` | Supabase database host |
| `DB_POSTGRESDB_PORT` | Supabase database port |
| `DB_POSTGRESDB_DATABASE` | `postgres` (or your database name) |
| `DB_POSTGRESDB_USER` | Supabase database user |
| `DB_POSTGRESDB_PASSWORD` | Supabase database password |
| `DB_POSTGRESDB_SSL_CA` | Supabase SSL certificate (full PEM) |
| `N8N_ENCRYPTION_KEY` | Random string, keep it stable |

### 5. Configure Hugging Face Space variables

Add these as **Variables** in the Space settings:

| Variable | Value |
| --- | --- |
| `DB_TYPE` | `postgres` |
| `DB_POSTGRESDB_SCHEMA` | `public` |
| `N8N_PORT` | `7860` |
| `N8N_PROTOCOL` | `https` |
| `N8N_HOST` | `<owner>-<space>.hf.space` |
| `N8N_EDITOR_BASE_URL` | `https://<owner>-<space>.hf.space` |
| `WEBHOOK_URL` | `https://<owner>-<space>.hf.space` |
| `N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS` | `true` |
| `N8N_PUSH_BACKEND` | `websocket` |
| `N8N_DATABASE_SSL_REJECT_UNAUTHORIZED` | `true` |
| `N8N_PROXY_HOPS` | `1` |
| `GENERIC_TIMEZONE` | Your timezone (optional) |
| `TZ` | Your timezone (optional) |

Optional execution retention settings:

| Variable | Value |
| --- | --- |
| `EXECUTIONS_DATA_SAVE_ON_PROGRESS` | `false` |
| `EXECUTIONS_DATA_SAVE_ON_ERROR` | `all` |
| `EXECUTIONS_DATA_SAVE_ON_SUCCESS` | `none` |
| `EXECUTIONS_DATA_SAVE_MANUAL_EXECUTIONS` | `false` |
| `EXECUTIONS_DATA_PRUNE` | `true` |
| `EXECUTIONS_DATA_MAX_AGE` | `168` |

### 6. Configure GitHub Actions secrets and variables

Add these in your forked repo under **Settings > Secrets and variables > Actions**.

Secrets:

| Secret | Required | Description |
| --- | --- | --- |
| `HF_TOKEN` | Yes | Hugging Face token with write access |
| `SUPABASE_URL` | Yes | Supabase project URL (for keep-alive) |
| `SUPABASE_KEY` | Yes | Supabase `anon public` key (for keep-alive) |
| `TG_TOKEN` | No | Telegram bot token (healthcheck alerts) |
| `TG_CHAT_ID` | No | Telegram chat ID (healthcheck alerts) |

Variables:

| Variable | Required | Description |
| --- | --- | --- |
| `HF_SPACE_URL` | Yes | `https://huggingface.co/spaces/<owner>/<space>` or `https://<owner>-<space>.hf.space` |
| `HF_REPO` | No | Override repo path: `<owner>/<space>` |

### 7. Update the Space remote in workflows and scripts

These files hardcode the Space remote and must be updated after you fork:

- `.github/workflows/push-to-huggingface.yml`
- `.github/workflows/update-n8n.yml`
- `healthcheck-rebuild.sh`

Replace `tenfyzhong/n8n-free` with your Space path.

## Operations and automation

### Update n8n version

Run the `update-n8n.yml` workflow manually. The scheduled trigger is commented
out; uncomment it if you want automatic updates. It:

1. Checks the latest n8n version tag.
2. Updates the `Dockerfile` tag.
3. Commits the change.
4. Pushes to the Hugging Face Space.

### Push to Hugging Face on every commit

`push-to-huggingface.yml` pushes `main` to your Space whenever you push to GitHub.

### Keep-alive workflows

- `huggingface-keep-alive.yml` pings your Space URL.
- `supabase-keep-alive.yml` pings the `keep-alive` table via REST.
Both schedules are commented out by default; uncomment them to enable cron.

### Health checks and rebuilds

`healthcheck.yml` runs every 10 minutes and calls `healthcheck-rebuild.sh`.
It checks `https://<N8N_HOST>/healthz/readiness` and forces a rebuild if unhealthy.

To run locally:

```
HF_REPO=<owner>/<space> \
N8N_HOST=<owner>-<space>.hf.space \
HF_TOKEN=<your_hf_token> \
bash healthcheck-rebuild.sh
```

Optional Telegram alerts:

```
TG_TOKEN=<bot_token> TG_CHAT_ID=<chat_id>
```

### Optional n8n workflow

Import `Auto keep n8n alive and updates on n8n-free repo.json` into n8n if you want
an in-app workflow for keep-alive and update triggers.

## Troubleshooting

- **Healthcheck fails with missing HF_SPACE_URL**: Set `HF_SPACE_URL` in GitHub
  repo variables. Use a full Space URL.
- **Database SSL errors**: Ensure SSL is enabled in Supabase and
  `DB_POSTGRESDB_SSL_CA` contains the full PEM certificate.
- **Webhooks point to the wrong host**: Align `N8N_HOST`,
  `N8N_EDITOR_BASE_URL`, and `WEBHOOK_URL` to the Space host.

## Security notes

Do not commit secrets. Use Hugging Face Space secrets and GitHub Actions secrets.
